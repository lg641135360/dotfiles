#################################
#             阴影              #
#################################

# 启用客户端窗口阴影
shadow = true;

# 阴影的垂直偏移（像素）
shadow-offset-x = -15;
shadow-offset-y = -15;

# 阴影的不透明度（0.0 - 1.0）
shadow-opacity = 0.75;

# 阴影的模糊半径（像素）
shadow-radius = 20;

# 不绘制阴影的窗口列表
shadow-exclude = [
  "name = 'Notification'",
  "class_g = 'Conky'",
  "class_g ?= 'Notify-osd'",
  "class_g = 'Cairo-clock'",
  "_GTK_FRAME_EXTENTS@:c",
  "class_g = 'Dunst'",
];

#################################
#             淡入淡出           #
#################################

# 窗口打开/关闭时淡入淡出
fading = true;

# 淡入淡出的时间间隔（毫秒）
fade-in-step = 0.03;
fade-out-step = 0.03;

# 淡入淡出的时间（毫秒）
fade-delta = 5;

# 不应用淡入淡出的窗口列表
fade-exclude = [];

#################################
#             透明度             #
#################################

# 非活动窗口的不透明度（0.1 - 1.0）
inactive-opacity = 0.9;

# 活动窗口的不透明度（0.1 - 1.0）
active-opacity = 1.0;

# 窗口标题栏和边框的不透明度（0.1 - 1.0）
frame-opacity = 0.9;

# 非活动窗口的不透明度默认值
inactive-opacity-override = false;

# 特定窗口的不透明度规则
opacity-rule = [
  "100:class_g = 'firefox'",
  "100:class_g = 'microsoft-edge-stable'",
  "95:class_g = 'Alacritty' && focused",
  "85:class_g = 'Alacritty' && !focused",
  "100:class_g = 'Code'",
  "90:class_g = 'Rofi'",
];

#################################
#             圆角              #
#################################

# 窗口圆角半径（像素）
corner-radius = 10;

# 排除圆角的窗口
rounded-corners-exclude = [
  "window_type = 'dock'",
  "window_type = 'desktop'",
  "class_g = 'xmobar'",
  "class_g = 'Polybar'",
];

#################################
#             模糊              #
#################################

# 背景模糊
blur-background = true;

# 模糊方法（dual_kawase, gaussian, kernel）
blur-method = "dual_kawase";

# 模糊强度（dual_kawase 推荐 1-10）
blur-strength = 5;

# 模糊背景排除列表
blur-background-exclude = [
  "window_type = 'dock'",
  "window_type = 'desktop'",
  "_GTK_FRAME_EXTENTS@:c",
  "class_g = 'xmobar'",
];

#################################
#        通用设置               #
#################################

# 后端（glx 或 xrender，glx 性能更好）
backend = "glx";

# 启用垂直同步以防止画面撕裂
vsync = true;

# 尝试检测窗口最小化和关闭事件
detect-transient = true;
detect-client-leader = true;

# GLX 后端特定设置
glx-no-stencil = true;
glx-no-rebind-pixmap = true;

# 使用损坏信息来减少 CPU 使用
use-damage = true;

# 窗口类型设置
wintypes:
{
  tooltip = { fade = true; shadow = true; opacity = 0.95; focus = true; full-shadow = false; };
  dock = { shadow = false; clip-shadow-above = true; }
  dnd = { shadow = false; }
  popup_menu = { opacity = 0.95; shadow = true; }
  dropdown_menu = { opacity = 0.95; shadow = true; }
};

#################################
#         动画设置              #
#################################

# 启用动画（需要 picom-git 或支持动画的版本）
animations = true;

# 动画配置（如果您的 picom 版本支持）
animation-stiffness = 300;
animation-dampening = 22;
animation-window-mass = 1;
animation-clamping = false;

# 为不同操作定义动画
animation-for-open-window = "zoom";
animation-for-unmap-window = "slide-down";
animation-for-menu-window = "slide-up";
animation-for-transient-window = "slide-down";
